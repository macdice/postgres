# src/template/darwin

# Note: Darwin is the original code name for macOS, also known as OS X.
# We still use "darwin" as the port name, partly because config.guess does.

# Select where system include files should be sought
PG_SYSROOT=`${srcdir}/src/tools/darwin_sysroot $PG_SYSROOT`

if test -d "$PG_SYSROOT" ; then
  CPPFLAGS="-isysroot $PG_SYSROOT $CPPFLAGS"
  LDFLAGS="-isysroot $PG_SYSROOT $LDFLAGS"
fi

# Extra CFLAGS for code that will go into a shared library
CFLAGS_SL=""

# If targeting macOS 14.4 and above, use futexes to emulate unnamed semaphores,
# and otherwise fall back to System V semaphores.
PREFERRED_SEMAPHORES="UNNAMED_POSIX+EMULATION"

DLSUFFIX=".dylib"
